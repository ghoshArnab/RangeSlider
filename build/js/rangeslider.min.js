var RangeSlider=function(){function t(){for(var t=Array.prototype.shift.call(arguments),e=0;e<arguments.length;e++)for(var i in arguments[e])arguments[e].hasOwnProperty(i)&&(t[i]=arguments[e][i]);return t}function e(t,e,i){var s;return function(){var n=this,a=arguments,r=function(){s=null,i||t.apply(n,a)},o=i&&!s;clearTimeout(s),s=setTimeout(r,e),o&&t.apply(n,a)}}function i(t){var e=document.body.getBoundingClientRect(),i=t.getBoundingClientRect(),s={left:i.left-e.left,max:i.left-e.left+t.clientWidth};return s}function s(t,e,i){return e.forEach(function(e,i,s){t.classList.add(e)}),t.firstChild.appendChild(document.createTextNode(i)),t.setAttribute("data-rs-value",i),t}function n(t,e){return t?t.value:e}function a(s,a){if(!s)return void console.info("No node to attach Slider to");this.config={steps:n(s.attributes["data-rs-steps"],!1),min:n(s.attributes["data-rs-min"],0),max:n(s.attributes["data-rs-max"],100),onRangeChange:function(){},afterInit:function(){}},this.config=t(this.config,a),this.baseElement=s,this.isStepped=!1,this.init();var r=this;this.movePointer(this.rangeWidth,"%"),this.pointer.addEventListener("mousedown",function(t){t.preventDefault(),r.isFocussed=!0,(0===r.ptDrag.minOffset||0===r.ptDrag.maxOffset)&&(r.initDragObject(),r.width=s.clientWidth),r.ptDrag.start=this.style.left,this.classList.remove("transitionable"),r.rangeProgress.classList.remove("transitionable")}),window.addEventListener("mousemove",e(function(t){if(r.isFocussed===!0){var e;t.clientX<r.ptDrag.minOffset&&(e=r.evalPosition(r.ptDrag.minOffset)),t.clientX>r.ptDrag.maxOffset&&(e=r.evalPosition(r.ptDrag.maxOffset)),t.clientX>r.ptDrag.minOffset&&t.clientX<r.ptDrag.maxOffset&&(e=r.evalPosition(t.clientX)),r.movePointer(e,"%");var s=i(r.pointer);r.ptDrag.lastOffset=s.left,s.left<r.ptDrag.minOffset&&(r.ptDrag.lastOffset=r.ptDrag.minOffset),s.left>r.ptDrag.maxOffset&&(r.ptDrag.lastOffset=r.ptDrag.maxOffset)}}),350),window.addEventListener("mouseup",function(t){if(r.isFocussed===!0){if(r.isFocussed=!1,r.isStepped){var e=r.evalPosition(r.ptDrag.lastOffset);e=e/100*r.scope,r.setRange(Math.ceil(e))}r.pointer.classList.add("transitionable"),r.rangeProgress.classList.add("transitionable")}}),window.addEventListener("resize",function(t){r.isFocussed=!1,r.reInit()}),this.isStepped?Array.prototype.forEach.call(r.ranges,function(t,e,i){t.style.width=r.rangeWidth+"%",t.addEventListener("click",function(){Array.prototype.forEach.call(r.ranges,function(t,e,i){t.classList.remove("highlighted")}),this.classList.add("highlighted"),r.movePointer((e+1)*r.rangeWidth,"%"),r.currentRange=this.getAttribute("data-rs-value")})}):this.baseElement.addEventListener("click",function(t){if(t.target!==r.pointer){var e=r.evalPosition(t.clientX);r.movePointer(e,"%")}}),this.config.afterInit()}return a.prototype.getRange=function(){return this.currentRange},a.prototype.setRange=function(t){if(t=parseInt(t),this.config.steps){var e=this.scope/parseInt(this.size);if(e=Math.floor(t/e),0>e||e>this.size)return;this.ranges[e].click()}this.config.onRangeChange()},a.prototype.updateProgress=function(t){t>60?t>=85?this.rangeProgress.classList.add("danger"):(this.rangeProgress.classList.remove("danger"),this.rangeProgress.classList.add("caution")):this.rangeProgress.classList.remove("caution","danger")},a.prototype.movePointer=function(t,e){this.pointer.style.left=t-1+e,this.rangeProgress.style.width=t+e,this.updateProgress(t)},a.prototype.initDragObject=function(){this.width=this.baseElement.clientWidth;var t=i(this.baseElement);this.ptDrag={minOffset:t.left,maxOffset:t.max,lastOffset:0,start:0}},a.prototype.init=function(){this.pointer=document.createElement("span"),this.rangeProgress=document.createElement("span"),this.pointer.classList.add("pointer","transitionable"),this.rangeProgress.classList.add("range-progress","transitionable"),this.baseElement.appendChild(this.pointer),this.baseElement.appendChild(this.rangeProgress),this.config.steps&&(this.ranges=this.createRangeNodes(),this.size=parseInt(this.config.steps),this.rangeWidth=100/this.size,this.isStepped=!0),this.scope=parseInt(this.config.max)-parseInt(this.config.min),this.currentRange=this.config.min,this.ptDrag={},this.width=this.baseElement.clientWidth,this.isFocussed=!1,this.initDragObject()},a.prototype.reInit=function(){this.scope=parseInt(this.config.max)-parseInt(this.config.min),this.currentRange=this.config.min,this.ptDrag={},this.width=this.baseElement.clientWidth,this.isFocussed=!1,this.initDragObject()},a.prototype.evalPosition=function(t){return(t-this.ptDrag.minOffset)/this.width*100},a.prototype.createRangeNodes=function(){for(var t=this,e=["range","stepped"],i=parseFloat(this.config.min),n=parseFloat(this.config.max),a=parseFloat(this.config.steps),r=n-i,o=r/a,c=[],h=1;a>=h;h++){var f=document.createElement("span");switch(f.appendChild(document.createElement("p")),!0){case 0===h:f=s(f,e,String(i+h*o)),f.classList.add("highlighted");break;case a-h===0:f=s(f,e,this.config.max);break;default:f=s(f,e,String(Math.round(i+h*o)))}t.baseElement.appendChild(f),c.push(f)}return c},{create:function(t,e){var i=new a(t,e);return i}}}();