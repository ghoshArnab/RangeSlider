function extend(){for(var t=Array.prototype.shift.call(arguments),e=0;e<arguments.length;e++)for(var s in arguments[e])arguments[e].hasOwnProperty(s)&&(t[s]=arguments[e][s]);return t}function debounce(t,e,s){var i;return function(){var n=this,a=arguments,r=function(){i=null,s||t.apply(n,a)},o=s&&!i;clearTimeout(i),i=setTimeout(r,e),o&&t.apply(n,a)}}function getOffset(t){var e=document.body.getBoundingClientRect(),s=t.getBoundingClientRect(),i={left:s.left-e.left,max:s.left-e.left+t.clientWidth};return i}function createSpan(t,e,s){return e.forEach(function(e,s,i){t.classList.add(e)}),t.firstChild.appendChild(document.createTextNode(s)),t}function setDefault(t,e){return t?t.value:e}function RangeSlider(t,e){if(!t)return void console.log("No node to attach Slider to");var s={steps:setDefault(t.attributes["data-steps"],!1),min:setDefault(t.attributes["data-min-value"],0),max:setDefault(t.attributes["data-max-value"],100),onRangeChange:function(){},afterInit:function(){}};e=extend(s,e),this.domNode=t,this.isStepped=!1,this.build(e),this.currentRange=e.min,this.ptDrag={},this.width=t.clientWidth,this.isFocussed=!1,this.initDragObject();var i=this,n=100/this.size;this.movePointer(n,"%"),this.pointer.addEventListener("mousedown",function(e){e.preventDefault(),i.isFocussed=!0,(0===i.ptDrag.minOffset||0===i.ptDrag.maxOffset)&&(i.initDragObject(),i.width=t.clientWidth),i.ptDrag.start=this.style.left,this.classList.remove("transitionable"),i.rangeProgress.classList.remove("transitionable")}),window.addEventListener("mousemove",debounce(function(t){if(i.isFocussed===!0&&t.clientX>=i.ptDrag.minOffset&&t.clientX<=i.ptDrag.maxOffset){var e=i.evalPosition(t);i.movePointer(e,"%");var s=getOffset(i.pointer);i.ptDrag.lastOffset=s.left,s.left<i.ptDrag.minOffset&&(i.ptDrag.lastOffset=i.ptDrag.minOffset),s.left>i.ptDrag.maxOffset&&(i.ptDrag.lastOffset=i.ptDrag.maxOffset)}}),350),window.addEventListener("mouseup",function(t){if(i.isFocussed===!0){if(i.isFocussed=!1,i.isStepped){var e=Array.prototype.filter.call(i.ranges,function(t){var e=getOffset(t);return i.ptDrag.lastOffset>=e.left&&i.ptDrag.lastOffset<=e.max});e[0].click()}i.pointer.classList.add("transitionable"),i.rangeProgress.classList.add("transitionable")}}),window.addEventListener("resize",function(t){i.isFocussed=!1,i.initDragObject()}),this.isStepped?Array.prototype.forEach.call(i.ranges,function(t,s,a){t.style.width=n+"%",t.addEventListener("click",function(){Array.prototype.forEach.call(i.ranges,function(t,e,s){t.classList.remove("highlighted")}),this.classList.add("highlighted"),i.range!==this.getAttribute("data-value")&&(i.movePointer((s+1)*n,"%"),i.setRange(this.getAttribute("data-value"),e.onRangeChange))})}):this.domNode.addEventListener("click",function(t){if(t.target!==i.pointer){var e=i.evalPosition(t);i.movePointer(e,"%")}}),e.afterInit()}RangeSlider.prototype.getRange=function(){return this.currentRange},RangeSlider.prototype.setRange=function(t,e){this.currentRange=t,e()},RangeSlider.prototype.monitorProgress=function(t){t>60?t>=85?this.rangeProgress.classList.add("danger"):(this.rangeProgress.classList.remove("danger"),this.rangeProgress.classList.add("caution")):this.rangeProgress.classList.remove("caution","danger")},RangeSlider.prototype.movePointer=function(t,e){this.pointer.style.left=t-3+e,this.rangeProgress.style.width=t+e,this.monitorProgress(t)},RangeSlider.prototype.initDragObject=function(){this.width=this.domNode.clientWidth;var t=getOffset(this.domNode);this.ptDrag={minOffset:t.left,maxOffset:t.max,lastOffset:0,start:0}},RangeSlider.prototype.build=function(t){this.pointer=document.createElement("span"),this.rangeProgress=document.createElement("span"),this.pointer.classList.add("pointer","transitionable"),this.rangeProgress.classList.add("range-progress","transitionable"),this.domNode.appendChild(this.pointer),this.domNode.appendChild(this.rangeProgress),t.steps&&(this.ranges=this.createRangeNodes(t),this.size=parseInt(t.steps),this.isStepped=!0)},RangeSlider.prototype.evalPosition=function(t){return(t.clientX-this.ptDrag.minOffset)/this.width*100},RangeSlider.prototype.createRangeNodes=function(t){for(var e=this,s=["range","stepped"],i=parseFloat(t.min),n=parseFloat(t.max),a=parseFloat(t.steps),r=n-i,o=r/a,d=[],l=1;a>=l;l++){var c=document.createElement("span");switch(c.appendChild(document.createElement("p")),!0){case 0===l:c=createSpan(c,s,String(i+l*o)),c.classList.add("highlighted");break;case a-l===0:c=createSpan(c,s,t.max);break;default:c=createSpan(c,s,String(Math.round(i+l*o)))}e.domNode.appendChild(c),d.push(c)}return console.log(d),d};